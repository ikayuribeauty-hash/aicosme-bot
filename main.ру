import os
from telegram import Update
from telegram.ext import Application, CommandHandler, ContextTypes

BOT_TOKEN = os.getenv("8376198443:AAH6xKPnbRfVKNqNgYJGKLN0515g9JDPHg0")
GUIDE_URL = "https://cloud.mail.ru/public/5jmd/ATo34Engb"  # ‚Üê –∑–∞–º–µ–Ω–∏—Ç–µ –Ω–∞ –≤–∞—à—É —Å—Å—ã–ª–∫—É!

async def start(update: Update, context: ContextTypes.DEFAULT_TYPE):
    user = update.effective_user
    ref = context.args[0] if context.args else "direct"
    print(f"–ù–æ–≤—ã–π –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—å: {user.full_name}, –ò—Å—Ç–æ—á–Ω–∏–∫: {ref}")
    await update.message.reply_text(
        f"–ü—Ä–∏–≤–µ—Ç, {user.first_name}! üå∏\n\n"
        "–í–æ—Ç —Ç–≤–æ–π –≥–∏–¥ ¬´5 —è–ø–æ–Ω—Å–∫–∏—Ö –ø—Ä–∏–≤—ã—á–µ–∫ —É—Ö–æ–¥–∞ –¥–æ–º–∞¬ª:\n"
        f"[üì• –°–∫–∞—á–∞—Ç—å PDF]({GUIDE_URL})\n\n"
        "–ü–æ–¥–ø–∏—à–∏—Å—å –Ω–∞ @aicosme ‚Äî —Ç–∞–º –µ—â—ë –±–æ–ª—å—à–µ —Å–æ–≤–µ—Ç–æ–≤!",
        parse_mode="Markdown"
    )

async def guide(update: Update, context: ContextTypes.DEFAULT_TYPE):
    await start(update, context)

def main():
    app = Application.builder().token(BOT_TOKEN).build()
    app.add_handler(CommandHandler("start", start))
    app.add_handler(CommandHandler("guide", guide))
    app.run_polling()

if __name__ == "__main__":
    main()